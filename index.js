!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(self,(()=>(()=>{"use strict";var t=1e-6,e="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function n(){var t=new e(16);return e!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function r(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],c=e[6],l=e[7],f=e[8],s=e[9],h=e[10],v=e[11],m=e[12],g=e[13],d=e[14],p=e[15],L=n*u-r*a,A=n*c-o*a,b=n*l-i*a,y=r*c-o*u,w=r*l-i*u,P=o*l-i*c,E=f*g-s*m,C=f*d-h*m,F=f*p-v*m,M=s*d-h*g,S=s*p-v*g,R=h*p-v*d,x=L*R-A*S+b*M+y*F-w*C+P*E;return x?(x=1/x,t[0]=(u*R-c*S+l*M)*x,t[1]=(o*S-r*R-i*M)*x,t[2]=(g*P-d*w+p*y)*x,t[3]=(h*w-s*P-v*y)*x,t[4]=(c*F-a*R-l*C)*x,t[5]=(n*R-o*F+i*C)*x,t[6]=(d*b-m*P-p*A)*x,t[7]=(f*P-h*b+v*A)*x,t[8]=(a*S-u*F+l*E)*x,t[9]=(r*F-n*S-i*E)*x,t[10]=(m*w-g*b+p*L)*x,t[11]=(s*b-f*w-v*L)*x,t[12]=(u*C-a*M-c*E)*x,t[13]=(n*M-r*C+o*E)*x,t[14]=(g*A-m*y-d*L)*x,t[15]=(f*y-s*A+h*L)*x,t):null}function o(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],c=e[5],l=e[6],f=e[7],s=e[8],h=e[9],v=e[10],m=e[11],g=e[12],d=e[13],p=e[14],L=e[15],A=n[0],b=n[1],y=n[2],w=n[3];return t[0]=A*r+b*u+y*s+w*g,t[1]=A*o+b*c+y*h+w*d,t[2]=A*i+b*l+y*v+w*p,t[3]=A*a+b*f+y*m+w*L,A=n[4],b=n[5],y=n[6],w=n[7],t[4]=A*r+b*u+y*s+w*g,t[5]=A*o+b*c+y*h+w*d,t[6]=A*i+b*l+y*v+w*p,t[7]=A*a+b*f+y*m+w*L,A=n[8],b=n[9],y=n[10],w=n[11],t[8]=A*r+b*u+y*s+w*g,t[9]=A*o+b*c+y*h+w*d,t[10]=A*i+b*l+y*v+w*p,t[11]=A*a+b*f+y*m+w*L,A=n[12],b=n[13],y=n[14],w=n[15],t[12]=A*r+b*u+y*s+w*g,t[13]=A*o+b*c+y*h+w*d,t[14]=A*i+b*l+y*v+w*p,t[15]=A*a+b*f+y*m+w*L,t}function i(t,e,n){var r,o,i,a,u,c,l,f,s,h,v,m,g=n[0],d=n[1],p=n[2];return e===t?(t[12]=e[0]*g+e[4]*d+e[8]*p+e[12],t[13]=e[1]*g+e[5]*d+e[9]*p+e[13],t[14]=e[2]*g+e[6]*d+e[10]*p+e[14],t[15]=e[3]*g+e[7]*d+e[11]*p+e[15]):(r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],c=e[5],l=e[6],f=e[7],s=e[8],h=e[9],v=e[10],m=e[11],t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=u,t[5]=c,t[6]=l,t[7]=f,t[8]=s,t[9]=h,t[10]=v,t[11]=m,t[12]=r*g+u*d+s*p+e[12],t[13]=o*g+c*d+h*p+e[13],t[14]=i*g+l*d+v*p+e[14],t[15]=a*g+f*d+m*p+e[15]),t}function a(e,n,r){var o,i,a,u=r[0],c=r[1],l=r[2],f=Math.hypot(u,c,l);return f<t?null:(u*=f=1/f,c*=f,l*=f,o=Math.sin(n),a=1-(i=Math.cos(n)),e[0]=u*u*a+i,e[1]=c*u*a+l*o,e[2]=l*u*a-c*o,e[3]=0,e[4]=u*c*a-l*o,e[5]=c*c*a+i,e[6]=l*c*a+u*o,e[7]=0,e[8]=u*l*a+c*o,e[9]=c*l*a-u*o,e[10]=l*l*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var u=function(t,e,n,r,o){var i,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(i=1/(r-o),t[10]=(o+r)*i,t[14]=2*o*r*i):(t[10]=-1,t[14]=-2*r),t};function c(t,e,n){var r=e[0],o=e[1],i=e[2];return t[0]=r*n[0]+o*n[3]+i*n[6],t[1]=r*n[1]+o*n[4]+i*n[7],t[2]=r*n[2]+o*n[5]+i*n[8],t}var l,f;l=new e(3),e!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),f=l;function s(){var t=new e(9);return e!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function h(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}var v=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},m=function(t,e){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=e.call(t,i)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},g=function(){function e(){this.vertexShaderSource="\n        attribute vec4 aPosition;\n        attribute vec3 aNormal;\n        attribute vec3 aColor;\n\n        uniform mat4 uModelMatrix;\n        uniform mat4 uProjectionMatrix;\n        uniform mat4 uNormalMatrix;\n        uniform mat4 uViewMatrix;\n        varying vec3 vNormal;\n        varying vec3 vPosition;\n        varying vec3 vColor;\n\n        void main() {\n          vPosition = vec3(uViewMatrix * uModelMatrix * aPosition);\n          vNormal = mat3(uViewMatrix * uNormalMatrix) * aNormal;\n          vColor = aColor;\n          gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * aPosition;\n        }\n      ",this.fragmentShaderSource="\n    precision mediump float;\n    varying vec3 vNormal;\n    varying vec3 vPosition;\n    varying vec3 vColor;\n\n    uniform float uCountPositon;\n    uniform vec3 uLightPosition[20];\n    uniform vec3 uPositionLightColor[20];\n\n    uniform float uCountVector;\n    uniform vec3 uLightVectors[20];\n    uniform vec3 uLightVectorColors[20];\n\n    uniform vec3 uAmbientColor;\n    uniform vec3 uDiffuseColor;\n    uniform vec3 uSpecularColor;\n    uniform float uShininess;\n\n    void main() {\n        vec3 normal = normalize(vNormal);\n        vec3 viewDirection = normalize(-vPosition);\n\n        vec3 ambient = vec3(0.0);\n        vec3 diffuse = vec3(0.0);\n        vec3 specular = vec3(0.0);\n        vec3 vector = vec3(0.0);\n\n        for (int i = 0; i < 20; i++) {\n            if (i >= int(uCountPositon)) break;\n            vec3 lightDirection = normalize(uLightPosition[i] - vPosition);\n\n            // Ambient lighting\n            ambient += uAmbientColor * uPositionLightColor[i] * vColor;\n\n            // Diffuse lighting (Lambertian)\n            float diff = max(dot(lightDirection, normal), 0.0);\n            diffuse += diff * uDiffuseColor * uPositionLightColor[i] * vColor;\n\n            // Specular lighting (Phong reflection)\n            vec3 reflectDir = reflect(-lightDirection, normal);\n            float spec = pow(max(dot(viewDirection, reflectDir), 0.0), uShininess);\n            specular += uSpecularColor * spec * uPositionLightColor[i];\n        }\n\n        for (int i = 0; i < 20; i++) {\n        if (i >= int(uCountVector)) break; \n        vec3 lightDir = normalize(uLightVectors[i]); \n\n        float diff = max(dot(normal, lightDir), 0.0); \n        vector += diff * uLightVectorColors[i] * vColor;  \n        }\n\n        vec3 color = ambient + diffuse + specular + vector;\n        gl_FragColor = vec4(color, 1.0);\n    }",this.positions=new Float32Array([-1,-1,1,1,-1,1,-1,1,1,-1,1,1,1,-1,1,1,1,1,-1,-1,-1,-1,1,-1,1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,-1,-1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,-1,1,1,1,-1,1,1,1,-1,-1,-1,-1,-1,1,-1,1,-1,-1,-1,1,-1,1,1,-1,1,-1]),this.normals=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),this.colors=new Float32Array([1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1]),this.lightSoucres=[{isLightPosition:!0,value:[-1,-1,-1],color:[1,1,1]},{isLightPosition:!0,value:[0,0,0],color:[.8,.7,.5]},{isLightPosition:!0,value:[2,2,2],color:[1,1,1]},{isLightPosition:!1,value:[0,0,1],color:[.8,.7,.5]}]}return e.prototype.load=function(t){return v(this,void 0,void 0,(function(){var e,n,r,o,i,a,u,c,l,f;return m(this,(function(s){switch(s.label){case 0:if(!this.isValidFile(t))throw new Error("Tệp không hợp lệ: chỉ chấp nhận .glb, .gif");s.label=1;case 1:return s.trys.push([1,3,,4]),[4,t.arrayBuffer()];case 2:if(e=s.sent(),n=new DataView(e),r=n.getUint32(0,!0),o=n.getUint32(4,!0),n.getUint32(8,!0),1179937895!==r||2!==o)throw new Error("Không phải file GLB hợp lệ");if(i=12,a=n.getUint32(i,!0),1313821514!==n.getUint32(i+4,!0))throw new Error("Chunk JSON không hợp lệ");if(u=(new TextDecoder).decode(new Uint8Array(e,i+8,a)),c=JSON.parse(u),i+=8+a,l=n.getUint32(i,!0),5130562!==n.getUint32(i+4,!0))throw new Error("Chunk BIN không hợp lệ");if(new Uint8Array(e,i+8,l),!(c.meshes&&c.meshes[0]&&c.meshes[0].primitives&&c.meshes[0].primitives[0]))throw new Error("Không tìm thấy mesh hoặc primitive hợp lệ");return console.log(c),[3,4];case 3:throw f=s.sent(),console.error("Lỗi đọc GLB:",f),f;case 4:return[2]}}))}))},e.prototype.render=function(e){var l=this,f=0,v=0,m=n(),g=n(),d=1,p=!1,L=e.getContext("webgl2"),A=function(){if(p){var o=[d,d,d];L.viewport(0,0,L.canvas.width,L.canvas.height);var i=l.createShader(L,L.VERTEX_SHADER,l.vertexShaderSource),a=l.createShader(L,L.FRAGMENT_SHADER,l.fragmentShaderSource),c=l.createProgram(L,i,a);L.useProgram(c);var f=L.createBuffer();L.bindBuffer(L.ARRAY_BUFFER,f),L.bufferData(L.ARRAY_BUFFER,l.positions,L.STATIC_DRAW);var s=L.createBuffer();L.bindBuffer(L.ARRAY_BUFFER,s),L.bufferData(L.ARRAY_BUFFER,l.normals,L.STATIC_DRAW);var h=L.createBuffer();L.bindBuffer(L.ARRAY_BUFFER,h),L.bufferData(L.ARRAY_BUFFER,l.colors,L.STATIC_DRAW);var v=L.getAttribLocation(c,"aPosition");L.enableVertexAttribArray(v),L.bindBuffer(L.ARRAY_BUFFER,f),L.vertexAttribPointer(v,3,L.FLOAT,!1,0,0);var b=L.getAttribLocation(c,"aNormal");L.enableVertexAttribArray(b),L.bindBuffer(L.ARRAY_BUFFER,s),L.vertexAttribPointer(b,3,L.FLOAT,!1,0,0);var y=L.getAttribLocation(c,"aColor");L.enableVertexAttribArray(y),L.bindBuffer(L.ARRAY_BUFFER,h),L.vertexAttribPointer(y,3,L.FLOAT,!1,0,0);var w=L.getUniformLocation(c,"uModelMatrix"),P=L.getUniformLocation(c,"uViewMatrix"),E=L.getUniformLocation(c,"uProjectionMatrix"),C=L.getUniformLocation(c,"uNormalMatrix"),F=L.getUniformLocation(c,"uLightPosition"),M=L.getUniformLocation(c,"uPositionLightColor"),S=L.getUniformLocation(c,"uCountPositon"),R=L.getUniformLocation(c,"uCountVector"),x=L.getUniformLocation(c,"uLightVectors"),U=L.getUniformLocation(c,"uLightVectorColors"),B=L.getUniformLocation(c,"uAmbientColor"),D=L.getUniformLocation(c,"uDiffuseColor"),T=L.getUniformLocation(c,"uSpecularColor"),_=L.getUniformLocation(c,"uShininess"),Y=l.lightSoucres.filter((function(t){return t.isLightPosition})).map((function(t){return t.value})),I=l.lightSoucres.filter((function(t){return t.isLightPosition})).map((function(t){return t.color})),V=l.lightSoucres.filter((function(t){return!t.isLightPosition})).map((function(t){return t.value})),N=l.lightSoucres.filter((function(t){return!t.isLightPosition})).map((function(t){return t.color}));L.uniform1f(S,Y.length),L.uniform3fv(F,new Float32Array(Y.flat())),L.uniform3fv(M,new Float32Array(I.flat())),L.uniform1f(R,V.length),L.uniform3fv(x,new Float32Array(V.flat())),L.uniform3fv(U,new Float32Array(N.flat())),L.uniform3fv(B,[.2,.2,.2]),L.uniform3fv(D,[.5,.5,.5]),L.uniform3fv(T,[1,1,1]),L.uniform1f(_,Number(150));var k=n();!function(t,e,n){var r=n[0],o=n[1],i=n[2];t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}(k,m,[o[0],o[1],o[2]]),L.uniformMatrix4fv(w,!1,k);var X=n();u(X,Math.PI*Number(90)/180,e.width/e.height,.1,100);var q=function(e,n,r,o){var i,a,u,c,l,f,s,h,v,m,g=n[0],d=n[1],p=n[2],L=o[0],A=o[1],b=o[2],y=r[0],w=r[1],P=r[2];return Math.abs(g-y)<t&&Math.abs(d-w)<t&&Math.abs(p-P)<t?function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}(e):(s=g-y,h=d-w,v=p-P,i=A*(v*=m=1/Math.hypot(s,h,v))-b*(h*=m),a=b*(s*=m)-L*v,u=L*h-A*s,(m=Math.hypot(i,a,u))?(i*=m=1/m,a*=m,u*=m):(i=0,a=0,u=0),c=h*u-v*a,l=v*i-s*u,f=s*a-h*i,(m=Math.hypot(c,l,f))?(c*=m=1/m,l*=m,f*=m):(c=0,l=0,f=0),e[0]=i,e[1]=c,e[2]=s,e[3]=0,e[4]=a,e[5]=l,e[6]=h,e[7]=0,e[8]=u,e[9]=f,e[10]=v,e[11]=0,e[12]=-(i*g+a*d+u*p),e[13]=-(c*g+l*d+f*p),e[14]=-(s*g+h*d+v*p),e[15]=1,e)}(n(),[0,0,-5],[0,0,0],[0,1,0]);r(g=n(),q),L.uniformMatrix4fv(P,!1,g),L.uniformMatrix4fv(E,!1,X);var O=n();r(O,k),function(t,e){if(t===e){var n=e[1],r=e[2],o=e[3],i=e[6],a=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=o,t[13]=a,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(O,O),L.uniformMatrix4fv(C,!1,O),L.enable(L.DEPTH_TEST),L.clearColor(0,0,0,1),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT),L.drawArrays(L.TRIANGLES,0,l.positions.length/3),p=!1,requestAnimationFrame(A)}};p=!0,requestAnimationFrame(A),e.addEventListener("mousedown",(function(t){if(2!==t.button){var i=e.getBoundingClientRect();f=(t.clientX-i.left)/i.width*2-1,v=-(t.clientY-i.top)/i.height*2+1;var u=function(t){var i=t,u=[0,1,0],l=[1,0,0];c(u,u,h(s(),r(n(),g))),c(l,l,h(s(),r(n(),g)));var d=e.getBoundingClientRect(),L=(i.clientX-d.left)/d.width*2-1,b=-(i.clientY-d.top)/d.height*2+1;o(m,a(n(),-(b-v)*Math.PI,l),m),o(m,a(n(),(L-f)*Math.PI,u),m),f=L,v=b,p=!0,requestAnimationFrame(A)},l=function(){f=0,v=0,e.removeEventListener("mousemove",u),e.removeEventListener("mouseup",l)};e.addEventListener("mousemove",u),e.addEventListener("mouseup",l)}})),e.addEventListener("mousedown",(function(t){if(2===t.button){var a=e.getBoundingClientRect();f=(t.clientX-a.left)/a.width*2-1,v=-(t.clientY-a.top)/a.height*2+1;var u=function(t){var a=t,u=[0,1,0],l=[1,0,0];c(u,u,h(s(),r(n(),g))),c(l,l,h(s(),r(n(),g)));var d=e.getBoundingClientRect(),L=(a.clientX-d.left)/d.width*2-1,b=-(a.clientY-d.top)/d.height*2+1;o(m,i(n(),n(),[5*-(L-f),5*(b-v),0]),m),f=L,v=b,p=!0,requestAnimationFrame(A)},l=function(){f=0,v=0,e.removeEventListener("mousemove",u),e.removeEventListener("mouseup",l)};e.addEventListener("mousemove",u),e.addEventListener("mouseup",l)}})),e.addEventListener("contextmenu",(function(t){return t.preventDefault()})),e.addEventListener("wheel",(function(t){t.preventDefault();var e=t.deltaY,n=.001;(d-=e*n)<.01&&(d=.01),d>2.5&&(d=2.5),p=!0,requestAnimationFrame(A)})),e.addEventListener("touchstart",(function(t){if(t.preventDefault(),1===t.touches.length){var i=t.touches[0],u=e.getBoundingClientRect();f=(i.clientX-u.left)/u.width*2-1,v=-(i.clientY-u.top)/u.height*2+1;var l=function(t){var i=t.touches[0],u=[0,1,0],l=[1,0,0];c(u,u,h(s(),r(n(),g))),c(l,l,h(s(),r(n(),g)));var d=e.getBoundingClientRect(),L=(i.clientX-d.left)/d.width*2-1,b=-(i.clientY-d.top)/d.height*2+1;o(m,a(n(),-(b-v)*Math.PI,l),m),o(m,a(n(),(L-f)*Math.PI,u),m),f=L,v=b,p=!0,requestAnimationFrame(A)},d=function(){f=0,v=0,e.removeEventListener("touchmove",l),e.removeEventListener("touchend",d)};e.addEventListener("touchmove",l),e.addEventListener("touchend",d)}}));var b=0;e.addEventListener("touchstart",(function(t){if(2===t.touches.length){var e=t.touches[0].clientX-t.touches[1].clientX,n=t.touches[0].clientY-t.touches[1].clientY;b=Math.sqrt(e*e+n*n)}})),e.addEventListener("touchmove",(function(t){if(t.preventDefault(),2===t.touches.length){var a=t.touches[0].clientX-t.touches[1].clientX,u=t.touches[0].clientY-t.touches[1].clientY,l=Math.sqrt(a*a+u*u),L=.005,y=l-b;b=l,(d+=y*L)<.05&&(d=.05),d>2.5&&(d=2.5);var w=e.getBoundingClientRect(),P=((t.touches[0].clientX+t.touches[1].clientX)/2-w.left)/w.width*2-1,E=-((t.touches[0].clientY+t.touches[1].clientY)/2-w.top)/w.height*2+1,C=[0,1,0],F=[1,0,0];c(C,C,h(s(),r(n(),g))),c(F,F,h(s(),r(n(),g))),o(m,i(n(),n(),[5*-(P-f),5*(E-v),0]),m),f=P,v=E,p=!0,requestAnimationFrame(A)}})),e.addEventListener("touchend",(function(){f=0,v=0}))},e.prototype.isValidFile=function(t){return[".glb",".gif"].some((function(e){return t.name.toLowerCase().endsWith(e)}))},e.prototype.createShader=function(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(console.error(t.getShaderInfoLog(r)),t.deleteShader(r),null)},e.prototype.createProgram=function(t,e,n){var r=t.createProgram();return t.attachShader(r,e),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?r:(console.error(t.getProgramInfoLog(r)),null)},e}(),d=document.getElementById("button-upload"),p=document.getElementById("canvas"),L=new g;return L.render(p),d.addEventListener("click",(function(){var t=document.createElement("input");t.type="file",t.accept=".glb, .gif",t.addEventListener("change",(function(){if(t.files&&t.files.length>0){var e=t.files[0];L.load(e),L.render(p)}t.remove()})),t.click()})),{}})()));